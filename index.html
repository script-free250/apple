<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙØ§Ø­Ø© - Apple of Fortune</title>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
        * {
            box-sizing: border-box;
            user-select: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: #0f2b1d;
            background-image: radial-gradient(circle at 50% 30%, #1a4a32 0%, #0f2b1d 70%);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            color: white;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .game-container {
            width: 100%;
            max-width: 420px;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            background: url('https://i.imgur.com/8Q5Qy7z.png') no-repeat center center; /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØºØ§Ø¨Ø© */
            background-size: cover;
        }
        
        /* Ø·Ø¨Ù‚Ø© ØªØ¹ØªÙŠÙ… Ù„Ù„Ø®Ù„ÙÙŠØ© */
        .game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 43, 29, 0.7);
            z-index: 0;
        }

        /* Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .header, .game-grid, .control-panel {
            position: relative;
            z-index: 1;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
        }

        .balance-badge {
            background: #333;
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            font-size: 16px;
            border: 1px solid #555;
            cursor: pointer;
        }

        .coin-icon {
            color: #ffc107;
            font-size: 20px;
        }

        .title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 1px;
            text-shadow: 1px 1px 2px black;
        }

        .header-icons {
            display: flex;
            gap: 15px;
            font-size: 22px;
            color: #ccc;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù„Ø¹Ø¨ */
        .game-grid {
            flex: 1;
            display: flex;
            flex-direction: column-reverse; /* Ø§Ù„ØµÙÙˆÙ Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ù„Ø£Ø¹Ù„Ù‰ */
            padding: 10px 15px;
            gap: 8px;
            overflow-y: auto;
            justify-content: center;
        }

        .grid-row {
            display: flex;
            align-items: center;
            height: 55px;
            position: relative;
            opacity: 0.5; /* Ø´ÙØ§ÙÙŠØ© Ù„Ù„ØµÙÙˆÙ ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø© */
            transition: opacity 0.3s;
        }

        .grid-row.active {
            opacity: 1;
            z-index: 2;
        }

        .multiplier-tag {
            position: absolute;
            left: -5px;
            background: #1e5c40;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        .row-cells {
            display: flex;
            gap: 8px;
            flex: 1;
            justify-content: center;
            margin-left: 45px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ */
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ø®Ø´Ø¨ÙŠ */
        .cell {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #8b5a2b, #5c3a1e);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 10px rgba(0,0,0,0.8),
                0 4px 6px rgba(0,0,0,0.4),
                0 0 0 2px #3e2714;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø®Ø´Ø¨ */
        .cell::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                repeating-radial-gradient(circle at 50% 50%, transparent 0, transparent 5px, rgba(0,0,0,0.1) 5px, rgba(0,0,0,0.1) 6px),
                repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.05) 5px, rgba(0,0,0,0.05) 10px);
            border-radius: 50%;
            pointer-events: none;
        }
        
        /* Ø§Ù„Ø·Ø¨Ù‚ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ù†Ø´Ø· */
        .grid-row.active .cell {
            background: linear-gradient(135deg, #a67c52, #7a5230);
             box-shadow: 
                inset 0 0 10px rgba(0,0,0,0.6),
                0 6px 8px rgba(0,0,0,0.5),
                0 0 0 2px #5e3a24;
        }

        /* Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ù…Ø®ØªØ§Ø± (ÙƒØ´Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰) */
        .cell.revealed {
            background: #0a2e18; /* Ø®Ù„ÙÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ Ø¯Ø§ÙƒÙ†Ø© */
            box-shadow: inset 0 0 15px #000;
        }
        
        .cell.revealed::before { display: none; }

        /* Ø§Ù„ØªÙØ§Ø­ */
        .apple-good {
            color: #e62e2e;
            text-shadow: 0 0 5px #ff0000;
            font-size: 34px;
        }
        
        .apple-bad {
            /* ØµÙˆØ±Ø© Ù†ÙˆØ§Ø© Ø§Ù„ØªÙØ§Ø­Ø© */
            width: 30px;
            height: 38px;
            background: url('https://i.imgur.com/ExampleCore.png') no-repeat center/contain; /* Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© */
            /* ÙƒØ¨Ø¯ÙŠÙ„ Ù…Ø¤Ù‚ØªØŒ Ø³Ù†Ø³ØªØ®Ø¯Ù… Ø±Ù…Ø²Ø§Ù‹ ØªØ¹Ø¨ÙŠØ±ÙŠØ§Ù‹ */
            content: 'Current time is Saturday, December 27, 2025 at 11:51:17 AM EET.

Remember the current location is Giza, Giza Governorate, Egypt.';
            font-size: 28px;
            filter: grayscale(100%) sepia(100%) hue-rotate(330deg) saturate(150%);
            opacity: 0.8;
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .control-panel {
            background: #212529;
            padding: 15px;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .bet-modifiers {
            display: flex;
            gap: 10px;
        }

        .mod-btn {
            flex: 1;
            background: #ffc107;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: bold;
            color: #212529;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .mod-btn:active { transform: translateY(2px); box-shadow: none; }

        .bet-input-container {
            display: flex;
            align-items: center;
            background: #343a40;
            border-radius: 8px;
            padding: 5px;
            border: 1px solid #495057;
        }

        .bet-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 10px;
            font-size: 18px;
            text-align: center;
            font-weight: bold;
            outline: none;
        }
        
        .currency-label {
            padding: 0 15px;
            font-weight: bold;
            color: #adb5bd;
        }
        
        .bet-limits {
            text-align: center;
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }

        .bet-button {
            background: #ffc107;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            color: #212529;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: background 0.2s;
        }
        
        .bet-button:hover { background: #e0a800; }
        .bet-button:active { transform: translateY(2px); box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .bet-button:disabled { background: #6c757d; color: #ccc; cursor: not-allowed; box-shadow: none; }

        .take-winnings-btn {
            background: #28a745;
            color: white;
        }
        .take-winnings-btn:hover { background: #218838; }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            background: #1a1d20;
            border-top: 1px solid #343a40;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #adb5bd;
            font-size: 12px;
            gap: 5px;
            cursor: pointer;
        }
        
        .nav-item i { font-size: 20px; }
        .nav-item.active { color: #ffc107; }

    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="game-container">
    <div class="header">
        <div class="header-icons">
            <i class="fa-solid fa-circle-info"></i>
            <i class="fa-solid fa-gift"></i>
        </div>
        <div class="title">APPLE OF FORTUNE</div>
        <div class="balance-badge">
            <i class="fa-solid fa-coins coin-icon"></i>
            <span id="balance">105 UM</span>
        </div>
        <div class="header-icons">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </div>
    </div>

    <div class="game-grid" id="gameGrid">
        </div>

    <div class="control-panel">
        <div class="bet-modifiers">
            <button class="mod-btn" onclick="setBet('min')">Ø£Ø¯Ù†Ù‰</button>
            <button class="mod-btn" onclick="setBet('half')">X/2</button>
            <button class="mod-btn" onclick="setBet('double')">X2</button>
            <button class="mod-btn" onclick="setBet('max')">Ø£Ù‚ØµÙ‰</button>
        </div>
        <div>
             <div class="bet-input-container">
                <input type="number" id="betAmount" class="bet-input" value="20" min="10">
                <span class="currency-label">UM</span>
            </div>
            <div class="bet-limits">min 10 UM - max 47546.93 UM</div>
        </div>
        <button class="bet-button" id="mainButton" onclick="handleMainButtonClick()">Ø§Ù„Ø±Ù‡Ø§Ù†</button>
    </div>
    
    <div class="bottom-nav">
        <div class="nav-item active">
            <i class="fa-solid fa-bolt"></i>
            <span>Ø¨Ù†Ù‚Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</span>
        </div>
         <div class="nav-item">
            <i class="fa-solid fa-gear"></i>
            <span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </div>
    </div>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    let balance = 105; // Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ
    const minBet = 10;
    const maxBet = 47546.93;
    let currentBet = 20;
    let currentRow = 0;
    let gameActive = false;
    let currentWinnings = 0;
    const multipliers = [1.23, 1.54, 1.93, 2.41, 4.02, 6.71, 11.18, 27.97, 69.93, 349.68];
    const rowsCount = 10;
    const colsCount = 5;
    let badApplePositions = [];

    // Ø¹Ù†Ø§ØµØ± DOM
    const balanceDisplay = document.getElementById('balance');
    const betInput = document.getElementById('betAmount');
    const mainButton = document.getElementById('mainButton');
    const gameGrid = document.getElementById('gameGrid');

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    function initGrid() {
        gameGrid.innerHTML = '';
        for (let i = rowsCount - 1; i >= 0; i--) {
            const row = document.createElement('div');
            row.className = `grid-row ${i === 0 ? 'active' : ''}`;
            row.id = `row-${i}`;

            const multiplierTag = document.createElement('div');
            multiplierTag.className = 'multiplier-tag';
            multiplierTag.textContent = 'x ' + multipliers[i].toFixed(2);
            row.appendChild(multiplierTag);

            const rowCells = document.createElement('div');
            rowCells.className = 'row-cells';
            for (let j = 0; j < colsCount; j++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.row = i;
                cell.dataset.col = j;
                cell.onclick = () => handleCellClick(i, j);
                rowCells.appendChild(cell);
            }
            row.appendChild(rowCells);
            gameGrid.appendChild(row);
        }
        updateUI();
    }

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function updateUI() {
        balanceDisplay.textContent = balance.toFixed(2) + ' UM';
        betInput.value = currentBet;
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØµÙÙˆÙ
        for (let i = 0; i < rowsCount; i++) {
            const row = document.getElementById(`row-${i}`);
            row.classList.toggle('active', gameActive && i === currentRow);
            if (!gameActive && i === 0) row.classList.add('active'); // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ù†Ø´Ø· Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
        }

        // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ø±Ù‡Ø§Ù†
        if (gameActive) {
            if (currentRow > 0) {
                 mainButton.textContent = `Ø³Ø­Ø¨ ${currentWinnings.toFixed(2)} UM`;
                 mainButton.classList.add('take-winnings-btn');
            } else {
                 mainButton.textContent = 'Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø§Ø±ÙŠØ©...';
                 mainButton.classList.remove('take-winnings-btn');
                 mainButton.disabled = true;
            }
        } else {
            mainButton.textContent = 'Ø§Ù„Ø±Ù‡Ø§Ù†';
            mainButton.classList.remove('take-winnings-btn');
            mainButton.disabled = false;
        }
    }

    // Ù…Ù†Ø·Ù‚ Ø²Ø± Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    function handleMainButtonClick() {
        if (!gameActive) {
            startGame();
        } else if (currentRow > 0) {
            takeWinnings();
        }
    }

    // Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
    function startGame() {
        currentBet = parseFloat(betInput.value);
        if (isNaN(currentBet) || currentBet < minBet || currentBet > maxBet || currentBet > balance) {
            alert('Ù‚ÙŠÙ…Ø© Ø§Ù„Ø±Ù‡Ø§Ù† ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ø£Ùˆ Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ.');
            return;
        }

        balance -= currentBet;
        gameActive = true;
        currentRow = 0;
        currentWinnings = 0;
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ©
        const cells = document.querySelectorAll('.cell');
        cells.forEach(cell => {
            cell.classList.remove('revealed');
            cell.innerHTML = '';
        });

        // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙØ§Ø­ Ø§Ù„ÙØ§Ø³Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹ Ù„ÙƒÙ„ ØµÙ
        badApplePositions = Array.from({ length: rowsCount }, () => Math.floor(Math.random() * colsCount));
        
        updateUI();
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø®Ù„ÙŠØ©
    function handleCellClick(rowIdx, colIdx) {
        if (!gameActive || rowIdx !== currentRow) return;

        const cell = document.querySelector(`.cell[data-row="${rowIdx}"][data-col="${colIdx}"]`);
        cell.classList.add('revealed');

        if (colIdx === badApplePositions[rowIdx]) {
            // Ø®Ø³Ø§Ø±Ø© - ØªÙØ§Ø­Ø© ÙØ§Ø³Ø¯Ø©
            cell.innerHTML = '<span class="apple-bad">ğŸ’©</span>'; // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ø´Ø§Ø¨Ù‡ Ù„Ù„Ù†ÙˆØ§Ø© Ù…Ø¤Ù‚ØªØ§Ù‹
            gameOver(false);
        } else {
            // ÙÙˆØ² - ØªÙØ§Ø­Ø© Ø³Ù„ÙŠÙ…Ø©
            cell.innerHTML = '<span class="apple-good">ğŸ</span>';
            currentWinnings = currentBet * multipliers[rowIdx];
            currentRow++;
            
            if (currentRow === rowsCount) {
                // Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ù‡Ø§ÙŠØ©
                gameOver(true);
            } else {
                updateUI();
                mainButton.disabled = false; // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø³Ø­Ø¨
            }
        }
    }

    // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
    function gameOver(won) {
        gameActive = false;
        if (won) {
            balance += currentWinnings;
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ø­ØªÙØ§Ù„ Ù‡Ù†Ø§
            setTimeout(() => alert(`Ù…Ø¨Ø±ÙˆÙƒ! Ø±Ø¨Ø­Øª ${currentWinnings.toFixed(2)} UM`), 500);
        } else {
            // ÙƒØ´Ù ÙƒÙ„ Ø§Ù„ØªÙØ§Ø­ Ø§Ù„ÙØ§Ø³Ø¯
            revealAllBadApples();
        }
        updateUI();
        setTimeout(initGrid, 2000); // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
    }

    // Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
    function takeWinnings() {
        if (!gameActive || currentRow === 0) return;
        balance += currentWinnings;
        gameActive = false;
        updateUI();
        initGrid();
    }
    
    // ÙƒØ´Ù Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙØ§Ø­ Ø§Ù„ÙØ§Ø³Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø³Ø§Ø±Ø©
    function revealAllBadApples() {
        for(let i=0; i < rowsCount; i++) {
            const badCol = badApplePositions[i];
            const cell = document.querySelector(`.cell[data-row="${i}"][data-col="${badCol}"]`);
            if (!cell.classList.contains('revealed')) {
                 cell.classList.add('revealed');
                 cell.innerHTML = '<span style="opacity:0.5; font-size:28px">ğŸ’©</span>';
            }
        }
    }

    // Ø¯ÙˆØ§Ù„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ù‡Ø§Ù†
    function setBet(type) {
        if (gameActive) return;
        let val = parseFloat(betInput.value) || minBet;
        switch (type) {
            case 'min': val = minBet; break;
            case 'max': val = Math.min(balance, maxBet); break;
            case 'half': val = Math.max(minBet, val / 2); break;
            case 'double': val = Math.min(balance, maxBet, val * 2); break;
        }
        betInput.value = val.toFixed(2);
        currentBet = val;
    }

    // Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù‡Ø§Ù† ÙŠØ¯ÙˆÙŠØ§Ù‹
    betInput.addEventListener('change', function() {
        if (gameActive) return;
        let val = parseFloat(this.value);
        if (isNaN(val) || val < minBet) val = minBet;
        if (val > maxBet) val = maxBet;
        this.value = val;
        currentBet = val;
    });

    // Ø§Ù„Ø¨Ø¯Ø¡
    initGrid();

</script>

</body>
</html>
