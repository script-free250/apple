<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apple Of Fortune 1xBet Style</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Tajawal', sans-serif;
            outline: none;
        }

        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        #app {
            width: 100%;
            max-width: 420px;
            height: 100vh;
            position: relative;
            background-color: #121b22;
            /* Ø¶Ø¹ ØµÙˆØ±Ø© Ø§Ù„ØºØ§Ø¨Ø© Ù‡Ù†Ø§ */
            background-image: url('bg.png'); 
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            background: rgba(0,0,0,0.2);
            z-index: 10;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .icon-btn {
            color: #fff;
            font-size: 22px;
            opacity: 0.8;
            cursor: pointer;
        }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨ÙˆÙ†Øµ */
        .bonus-badge {
            border: 2px dashed #888;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: #ccc;
            font-weight: bold;
        }

        /* ÙƒØ¨Ø³ÙˆÙ„Ø© Ø§Ù„Ø±ØµÙŠØ¯ */
        .balance-pill {
            background: rgba(30, 40, 40, 0.85);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 5px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #fff;
            font-weight: bold;
            font-size: 16px;
        }

        .plus-yellow {
            background: #ffc107;
            color: #000;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            font-weight: bold;
        }

        .game-subtitle {
            text-align: center;
            color: rgba(255,255,255,0.6);
            font-size: 12px;
            margin-top: 5px;
            letter-spacing: 1px;
        }

        /* --- Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨ --- */
        .game-board-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ */
            padding-top: 20px;
            padding-bottom: 200px; /* Ù…Ø³Ø§Ø­Ø© ÙƒØ¨ÙŠØ±Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
            overflow: hidden;
        }

        .grid {
            display: flex;
            flex-direction: column-reverse; /* Ø§Ù„ØµÙ 1 Ø£Ø³ÙÙ„ */
            gap: 6px;
            transform: scale(0.95);
        }

        .row {
            display: flex;
            gap: 10px;
            padding: 2px;
            border-radius: 10px;
            position: relative;
            transition: 0.3s;
        }

        /* Ø§Ù„ØµÙ Ø§Ù„Ù†Ø´Ø· ÙŠØ¶ÙŠØ¡ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        .row.active {
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.05);
        }

        .row.disabled {
            opacity: 0.8; /* Ù„Ø§ Ù†Ø¬Ø¹Ù„Ù‡ Ø¨Ø§Ù‡ØªØ§Ù‹ Ø¬Ø¯Ø§Ù‹ Ù„Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ø§Ù„Ø®Ø´Ø¨ */
            pointer-events: none;
            filter: brightness(0.7);
        }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø®Ø´Ø¨ÙŠØ© (CSS ÙÙ‚Ø·) --- */
        .cell {
            width: 58px;
            height: 58px;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            
            /* ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ ÙŠØ­Ø§ÙƒÙŠ Ø§Ù„Ø®Ø´Ø¨ Ø§Ù„Ø¨Ù†ÙŠ */
            background: radial-gradient(circle at 40% 40%, #6d4c41, #3e2723 60%, #1b0000 95%);
            border: 2px solid #3e2723;
            /* Ø¸Ù„ Ø¯Ø§Ø®Ù„ÙŠ ÙˆØ®Ø§Ø±Ø¬ÙŠ Ù„Ù„Ø¹Ù…Ù‚ */
            box-shadow: 
                inset 2px 2px 5px rgba(255,255,255,0.1),
                inset -2px -2px 5px rgba(0,0,0,0.5),
                0 5px 10px rgba(0,0,0,0.5);
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¶ØºØ· */
        .cell:active { transform: scale(0.95); }

        /* Ø§Ù„ØªÙØ§Ø­Ø© Ø§Ù„Ø³Ù„ÙŠÙ…Ø© (Ù‚Ø§Ø¹Ø¯Ø© Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØ´Ù) */
        .cell.revealed.good {
             background: radial-gradient(circle at 40% 40%, #66bb6a, #2e7d32 70%, #1b5e20 95%);
             border-color: #1b5e20;
        }

        /* Ø§Ù„ØµÙˆØ±Ø© */
        .cell img {
            width: 85%;
            height: 85%;
            object-fit: contain;
            display: none;
            z-index: 2;
            filter: drop-shadow(0 4px 3px rgba(0,0,0,0.4));
            animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .cell.revealed img { display: block; }

        @keyframes popUp {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³ÙÙ„ÙŠØ© (Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ØµÙˆØ±Ø©) --- */
        .controls-wrapper {
            position: absolute;
            bottom: 50px; /* ÙÙˆÙ‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ */
            left: 0;
            width: 100%;
            padding: 10px 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 20;
            /* ØªØ¯Ø±Ø¬ Ø®ÙÙŠÙ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø¯Ù…Ø¬Ù‡Ø§ */
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
        }

        /* ØµÙ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØµÙØ±Ø§Ø¡ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© */
        .quick-actions {
            display: flex;
            gap: 8px;
            justify-content: space-between;
        }

        .yellow-btn {
            flex: 1;
            background: #ffca28; /* Ø£ØµÙØ± Ø¯Ø§ÙƒÙ† Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            border: none;
            border-radius: 6px;
            padding: 10px 0;
            color: #fff; /* Ø§Ù„Ù†Øµ Ø£Ø¨ÙŠØ¶ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© */
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 3px 0 #c79100;
        }
        .yellow-btn:active { transform: translateY(2px); box-shadow: 0 1px 0 #c79100; }

        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ± */
        .bet-box {
            background: #37474f; /* Ø±Ù…Ø§Ø¯ÙŠ Ù…Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† */
            border-radius: 10px;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
            position: relative;
        }

        /* Ø²Ø± Ø§Ù„Ø±Ù‡Ø§Ù† "Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ/Ø§Ù„Ø£ØµÙØ±" Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ */
        .main-action-btn {
            background: linear-gradient(180deg, #ffca28 0%, #ffa000 100%);
            border: none;
            border-radius: 8px;
            width: 100px;
            height: 45px;
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 3px 0 #e65100;
            z-index: 2;
        }
        .main-action-btn:active { transform: translateY(2px); box-shadow: 0 1px 0 #e65100; }

        /* Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø¨ (Ø£Ø®Ø¶Ø±) */
        .cashout-mode {
            background: linear-gradient(180deg, #66bb6a 0%, #43a047 100%);
            box-shadow: 0 3px 0 #1b5e20;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Øµ (Ø§Ù„Ù…Ø¨Ù„Øº) */
        .bet-info {
            flex: 1;
            text-align: left; /* Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ Ù„Ù„ÙŠØ³Ø§Ø± */
            padding-left: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .amount-display {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            border-bottom: 1px solid #546e7a;
            padding-bottom: 2px;
        }

        .input-hidden {
            background: transparent;
            border: none;
            color: #fff;
            width: 80px;
            font-size: 18px;
            font-weight: bold;
            text-align: right;
        }

        .min-max-lbl {
            font-size: 10px;
            color: #90a4ae;
            margin-top: 4px;
            text-align: left;
        }

        /* --- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ --- */
        .bottom-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: #101010;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            border-top: 1px solid #333;
            z-index: 30;
        }

        .bar-item {
            color: #fff;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div id="app">
        <header>
            <div class="header-left">
                <div class="icon-btn">â“˜</div>
                <div class="bonus-badge">BONUS</div>
            </div>
            
            <div class="balance-pill">
                <span class="plus-yellow">+</span>
                <span id="balanceTxt">105 UM</span>
            </div>
            
            <div class="icon-btn">â†’</div>
        </header>

        <div class="game-subtitle">APPLE OF FORTUNE</div>

        <div class="game-board-area">
            <div class="grid" id="grid">
                </div>
        </div>

        <div class="controls-wrapper" id="controlsPanel">
            <div class="quick-actions">
                <button class="yellow-btn" onclick="setBet('min')">Ø£Ø¯Ù†Ù‰</button>
                <button class="yellow-btn" onclick="setBet('half')">X/2</button>
                <button class="yellow-btn" onclick="setBet('double')">X2</button>
                <button class="yellow-btn" onclick="setBet('max')">Ø£Ù‚ØµÙ‰</button>
            </div>

            <div class="bet-box">
                <button id="mainBtn" class="main-action-btn" onclick="doAction()">Ø§Ù„Ø±Ù‡Ø§Ù†</button>
                
                <div class="bet-info">
                    <div class="amount-display">
                        <span>UM</span>
                        <input type="number" id="betInput" class="input-hidden" value="20">
                    </div>
                    <div class="min-max-lbl">min 10 UM - max 47546.93 UM</div>
                </div>
            </div>
        </div>

        <div class="bottom-bar">
            <div class="bar-item">
                <span>âš¡</span> Ø¨Ù†Ù‚Ø±Ø© ÙˆØ§Ø­Ø¯Ø©
            </div>
            <div class="bar-item">
                <span>âš™ï¸</span> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </div>
        </div>
    </div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ---
        const ROWS = 10;
        const COLS = 5;
        // Ø§Ù„Ù…Ø¶Ø§Ø¹ÙØ§Øª (ØªØ³ØªØ®Ø¯Ù… Ø¯Ø§Ø®Ù„ÙŠØ§Ù‹ Ù„Ù„Ø­Ø³Ø§Ø¨)
        const ODDS = [1.23, 1.54, 1.93, 2.41, 4.02, 6.71, 11.18, 27.96, 69.91, 349.54];
        
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        let balance = 105.00;
        let currentBet = 20;
        let activeRow = 0;
        let isPlaying = false;
        let map = [];

        // DOM Elements
        const gridEl = document.getElementById('grid');
        const mainBtn = document.getElementById('mainBtn');
        const betInput = document.getElementById('betInput');
        const balanceTxt = document.getElementById('balanceTxt');
        const controlsPanel = document.getElementById('controlsPanel');

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ©
        function initGrid() {
            gridEl.innerHTML = '';
            for(let r=0; r<ROWS; r++) {
                const row = document.createElement('div');
                row.className = 'row disabled';
                row.id = `row-${r}`;
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ù„Ø§ÙŠØ§
                for(let c=0; c<COLS; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell'; // Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø®Ø´Ø¨ÙŠ ÙŠØ£ØªÙŠ Ù…Ù† CSS
                    cell.onclick = () => clickCell(r, c);
                    
                    const img = document.createElement('img');
                    img.id = `img-${r}-${c}`;
                    img.src = ''; // Ø³ØªÙ…Ù„Ø£ Ù„Ø§Ø­Ù‚Ø§Ù‹
                    
                    cell.appendChild(img);
                    row.appendChild(cell);
                }
                gridEl.appendChild(row);
            }
        }

        // Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø±Ù‡Ø§Ù† / Ø³Ø­Ø¨)
        function doAction() {
            if(!isPlaying) {
                startGame();
            } else {
                cashOut();
            }
        }

        function startGame() {
            currentBet = parseFloat(betInput.value);
            if(currentBet > balance) { alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ"); return; }
            if(currentBet < 10) { alert("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 10"); return; }

            balance -= currentBet;
            updateUI();
            
            isPlaying = true;
            activeRow = 0;
            generateMap();
            initGrid(); // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ù†Ø¸ÙŠÙ
            
            // ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©ØŒ Ù†Ø®ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØµÙˆØ± Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ù„Ø¹Ø¨ØŸ
            // Ø£Ùˆ Ù†Ø¨Ù‚ÙŠ Ø²Ø± Ø§Ù„Ø³Ø­Ø¨ ÙÙ‚Ø·. Ø­Ø³Ø¨ Ø§Ù„ØµÙˆØ±Ø©ØŒ Ø³Ù†Ø¨Ù‚ÙŠ Ø§Ù„Ù„ÙˆØ­Ø© ÙˆÙ„ÙƒÙ† Ù†ØºÙŠØ± Ø§Ù„Ø²Ø±
            mainBtn.style.display = 'none'; // Ù†Ø®ÙÙŠ Ø²Ø± Ø§Ù„Ø±Ù‡Ø§Ù† Ù…Ø¤Ù‚ØªØ§Ù‹
            // ÙÙŠ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ ØªØ®ØªÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© ÙˆÙŠØ¸Ù‡Ø± Ø²Ø± Ø³Ø­Ø¨ Ø¹Ø§Ø¦Ù… Ø£Ùˆ ØªØªØºÙŠØ± Ø§Ù„Ù„ÙˆØ­Ø©
            // Ù„Ù„ØªØ¨Ø³ÙŠØ·: Ø³Ù†Ø®ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© ÙƒØ§Ù…Ù„Ø© ÙˆÙ†Ø¸Ù‡Ø±Ù‡Ø§ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„ÙÙˆØ²
            controlsPanel.style.visibility = 'hidden'; 

            activateRow(0);
        }

        function generateMap() {
            map = [];
            for(let r=0; r<ROWS; r++) {
                // Ø§Ù„ØµØ¹ÙˆØ¨Ø©:
                let bombs = 1;
                if(r>=4) bombs=2;
                if(r>=7) bombs=3;
                if(r>=9) bombs=4;
                
                let arr = Array(COLS).fill(1); // 1 = ØªÙØ§Ø­Ø©
                for(let k=0; k<bombs; k++) {
                    let placed=false;
                    while(!placed) {
                        let idx = Math.floor(Math.random()*COLS);
                        if(arr[idx]===1) { arr[idx]=0; placed=true; } // 0 = Ù‚Ù†Ø¨Ù„Ø©
                    }
                }
                map.push(arr);
            }
        }

        function clickCell(r, c) {
            if(!isPlaying || r !== activeRow) return;
            
            const cell = document.getElementById(`img-${r}-${c}`).parentElement;
            if(cell.classList.contains('revealed')) return;

            reveal(r, c);
            
            if(map[r][c] === 1) {
                // Ø±Ø¨Ø­
                winRow(r);
            } else {
                // Ø®Ø³Ø§Ø±Ø©
                loseGame();
            }
        }

        function reveal(r, c) {
            const cell = document.getElementById(`img-${r}-${c}`).parentElement;
            const img = document.getElementById(`img-${r}-${c}`);
            
            cell.classList.add('revealed');
            
            if(map[r][c] === 1) {
                cell.classList.add('good');
                img.src = 'apple.png';
                img.onerror = () => { cell.innerHTML='ğŸ'; cell.style.fontSize='30px'; };
            } else {
                img.src = 'rotten.png';
                img.onerror = () => { cell.innerHTML='ğŸ›'; cell.style.fontSize='30px'; };
            }
        }

        function winRow(r) {
            const row = document.getElementById(`row-${r}`);
            row.classList.remove('active');
            
            activeRow++;
            let winVal = (currentBet * ODDS[r]).toFixed(2);
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø³Ø­Ø¨
            controlsPanel.style.visibility = 'visible';
            mainBtn.style.display = 'block';
            mainBtn.innerText = `Ø³Ø­Ø¨ ${winVal}`;
            mainBtn.classList.add('cashout-mode'); // ØªØ­ÙˆÙŠÙ„Ù‡ Ù„Ù„Ø£Ø®Ø¶Ø±

            if(activeRow >= ROWS) {
                cashOut();
            } else {
                activateRow(activeRow);
            }
        }

        function loseGame() {
            isPlaying = false;
            // ÙƒØ´Ù Ø§Ù„ØµÙ
            for(let c=0; c<COLS; c++) {
                const cell = document.getElementById(`img-${activeRow}-${c}`).parentElement;
                if(!cell.classList.contains('revealed')) reveal(activeRow, c);
            }
            
            setTimeout(() => {
                resetGame();
            }, 1500);
        }

        function cashOut() {
            if(!isPlaying) return;
            let idx = activeRow - 1;
            let amount = currentBet * ODDS[idx];
            balance += amount;
            alert(`Ù…Ø¨Ø±ÙˆÙƒ! Ø±Ø¨Ø­Øª ${amount.toFixed(2)}`);
            resetGame();
        }

        function resetGame() {
            isPlaying = false;
            updateUI();
            mainBtn.innerText = "Ø§Ù„Ø±Ù‡Ø§Ù†";
            mainBtn.classList.remove('cashout-mode');
            controlsPanel.style.visibility = 'visible';
            mainBtn.style.display = 'block';
            
            // Ø¬Ø¹Ù„ ÙƒÙ„ Ø§Ù„ØµÙÙˆÙ Ù…Ø¹Ø·Ù„Ø©
            const rows = document.querySelectorAll('.row');
            rows.forEach(r => {
                r.classList.add('disabled');
                r.classList.remove('active');
            });
        }

        function activateRow(r) {
            const row = document.getElementById(`row-${r}`);
            row.classList.remove('disabled');
            row.classList.add('active');
        }

        function updateUI() {
            balanceTxt.innerText = balance.toFixed(0) + ' UM';
        }

        function setBet(mode) {
            let v = parseFloat(betInput.value);
            if(mode==='min') v = 10;
            if(mode==='max') v = 47546;
            if(mode==='half') v = v/2;
            if(mode==='double') v = v*2;
            if(v<10) v=10;
            betInput.value = v.toFixed(0);
        }

        initGrid();
    </script>
</body>
</html>
